---
/* @jsxImportSource astro */
import { render } from 'astro:content';
import { BaseHomeLinkPage } from '../../components/base';
import { getAllPosts, type BlogEntry } from '../../content/config';
import { formatPageTitle } from '../../utils/format-page-title';

/**
 * Generates static paths for each blog post based on their IDs (filenames).
 */
export const getStaticPaths = async () => {
  const posts = await getAllPosts();
  const paths = posts.map((post: BlogEntry) => {
    return {
      params: { id: post.id },
      props: {
        post,
      },
    };
  });
  return paths;
};

type Props = {
  post: BlogEntry;
};

const { post } = Astro.props as Props;
const { Content } = await render(post);
const formattedTitle: string = formatPageTitle(post.data.title, post.data.date);
---

<BaseHomeLinkPage title={formattedTitle}>
  <Content />
</BaseHomeLinkPage>
